import{r as v,c as n,o as s,a as d,b as i,w as a,d as o,g as p,F as g,e as y,f as c,t as r,k as j,N as x}from"./app-CXcnNBuZ.js";import{_ as q}from"./PageHeader-DvzAu2Vm.js";import{_ as k}from"./Panel-DhepdfP1.js";import{_ as h}from"./PrimaryButton-Byj4UdoX.js";import{_ as V}from"./DangerButton-BKR9aq5h.js";import{_ as m}from"./Badge-DEdx3ca2.js";import{_ as b}from"./NoResult-hlZLEnnr.js";const z={class:"row-py"},B={key:0,class:"divide-y divide-gray-200 dark:divide-gray-700"},R={class:"flex-1"},P={class:"flex items-center gap-2 mb-2"},W={class:"text-sm text-gray-500"},D={class:"text-sm text-gray-700 dark:text-gray-300 mb-1"},F={class:"text-xs text-gray-500"},S={key:0,class:"text-xs text-gray-500 mt-1 italic"},E={class:"flex items-center gap-2"},I={key:0,class:"divide-y divide-gray-200 dark:divide-gray-700"},L={class:"font-medium text-gray-900 dark:text-gray-100"},T={key:0,class:"text-sm text-gray-500"},U={class:"text-xs text-gray-500"},G={class:"flex items-center gap-2"},Y={__name:"Approvals",props:{pending_approvals:Array,workflows:Array},setup(l){const w=v(!1);v({name:"",description:"",required_approvals:1,require_all:!1,approver_ids:[]});const N=_=>{confirm("Approve this post?")&&x.post(route("mixpost.approvals.approve",_.id),{comment:""})},$=_=>{const t=prompt("Reason for rejection:");t&&x.post(route("mixpost.approvals.reject",_.id),{comment:t})},A=_=>({pending:"warning",approved:"success",rejected:"danger"})[_]||"default";return(_,t)=>(s(),n("div",null,[d(q,{title:"Approvals"},{description:a(()=>t[1]||(t[1]=[o(" Review and approve posts before publishing ")])),_:1}),i("div",z,[d(k,{title:"Pending Approvals",class:"mb-6"},{default:a(()=>[l.pending_approvals&&l.pending_approvals.length>0?(s(),n("div",B,[(s(!0),n(g,null,y(l.pending_approvals,e=>{var f,u;return s(),n("div",{key:e.id,class:"py-4 flex items-start justify-between gap-4"},[i("div",R,[i("div",P,[d(m,{variant:A(e.status)},{default:a(()=>[o(r(e.status_label),1)]),_:2},1032,["variant"]),i("span",W,r(e.approvals_received)+"/"+r(e.approvals_required)+" approvals ",1)]),i("p",D,r(((f=e.post)==null?void 0:f.preview)||"No preview available"),1),i("p",F," Requested by "+r(((u=e.requester)==null?void 0:u.name)||"Unknown")+" â€¢ "+r(e.created_at_formatted),1),e.notes?(s(),n("p",S," Note: "+r(e.notes),1)):c("",!0)]),i("div",E,[d(h,{size:"sm",onClick:C=>N(e)},{default:a(()=>t[2]||(t[2]=[o(" Approve ")])),_:2,__:[2]},1032,["onClick"]),d(V,{size:"sm",onClick:C=>$(e)},{default:a(()=>t[3]||(t[3]=[o(" Reject ")])),_:2,__:[3]},1032,["onClick"])])])}),128))])):(s(),p(b,{key:1},{default:a(()=>t[4]||(t[4]=[o(" No pending approvals ")])),_:1,__:[4]}))]),_:1}),d(k,{title:"Approval Workflows"},{action:a(()=>[d(j,{size:"sm",onClick:t[0]||(t[0]=e=>w.value=!0)},{default:a(()=>t[5]||(t[5]=[o(" Create Workflow ")])),_:1,__:[5]})]),default:a(()=>[l.workflows&&l.workflows.length>0?(s(),n("div",I,[(s(!0),n(g,null,y(l.workflows,e=>(s(),n("div",{key:e.id,class:"py-3 flex items-center justify-between"},[i("div",null,[i("p",L,[o(r(e.name)+" ",1),e.is_default?(s(),p(m,{key:0,variant:"info",size:"sm",class:"ml-2"},{default:a(()=>t[6]||(t[6]=[o(" Default ")])),_:1,__:[6]})):c("",!0)]),e.description?(s(),n("p",T,r(e.description),1)):c("",!0),i("p",U,r(e.required_approvals)+" approval(s) required ",1)]),i("div",G,[d(m,{variant:e.is_active?"success":"default"},{default:a(()=>[o(r(e.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])])]))),128))])):(s(),p(b,{key:1},{default:a(()=>t[7]||(t[7]=[o(" No workflows configured ")])),_:1,__:[7]}))]),_:1})])]))}};export{Y as default};
