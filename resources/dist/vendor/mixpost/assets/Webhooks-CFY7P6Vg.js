import{r as y,s as B,c,o as d,a as i,b as l,w as a,d as n,g as b,F as g,e as k,t as u,k as p,N as v}from"./app-B17NwYzj.js";import{_ as D}from"./PageHeader-DfBjB2Gc.js";import{_ as A}from"./Panel-BlBCMgbm.js";import{_ as C}from"./PrimaryButton-C9dUpZNY.js";import{_ as F}from"./DangerButton-M6w4ORa-.js";import{_ as $}from"./Badge-W0WR448u.js";import{a as U}from"./DialogModal-BYxkMqdg.js";import{_ as W}from"./Input-CCipsDxT.js";import{_ as j}from"./Checkbox-L19oAxdi.js";import{_ as L}from"./NoResult-DvAamqXx.js";import"./PureButton-Cwn7JU-l.js";const M={class:"row-py"},O={key:0,class:"divide-y divide-gray-200 dark:divide-gray-700"},T={class:"flex items-start justify-between"},I={class:"flex-1"},R={class:"flex items-center gap-2 mb-1"},q={class:"font-medium text-gray-900 dark:text-gray-100"},G={class:"text-sm text-gray-500 font-mono truncate mb-2"},H={class:"flex flex-wrap gap-1"},J={class:"text-xs text-gray-400 mt-2"},P={class:"flex items-center gap-2"},Q={class:"space-y-4"},X={class:"grid grid-cols-2 gap-2"},Y={class:"text-sm text-gray-600 dark:text-gray-400"},ue={__name:"Webhooks",props:{webhooks:Array,available_events:Object},setup(_){const m=y(!1),f=y(null),s=B({name:"",url:"",events:[],secret:"",is_active:!0}),x=()=>{s.name="",s.url="",s.events=[],s.secret="",s.is_active=!0,f.value=null},V=()=>{x(),m.value=!0},z=o=>{f.value=o,s.name=o.name,s.url=o.url,s.events=o.events||[],s.is_active=o.is_active,m.value=!0},E=()=>{f.value?v.put(route("mixpost.webhooks.update",f.value.id),s,{onSuccess:()=>{m.value=!1,x()}}):v.post(route("mixpost.webhooks.store"),s,{onSuccess:()=>{m.value=!1,x()}})},N=o=>{confirm("Delete this webhook?")&&v.delete(route("mixpost.webhooks.destroy",o.id))},w=o=>{v.post(route("mixpost.webhooks.toggle",o.id))},h=o=>{v.post(route("mixpost.webhooks.test",o.id))},S=o=>{const e=s.events.indexOf(o);e>-1?s.events.splice(e,1):s.events.push(o)};return(o,e)=>(d(),c("div",null,[i(D,{title:"Webhooks"},{description:a(()=>e[4]||(e[4]=[n(" Send event notifications to external services ")])),_:1}),l("div",M,[i(A,null,{action:a(()=>[i(C,{size:"sm",onClick:V},{default:a(()=>e[5]||(e[5]=[n(" Add Webhook ")])),_:1,__:[5]})]),default:a(()=>[_.webhooks&&_.webhooks.length>0?(d(),c("div",O,[(d(!0),c(g,null,k(_.webhooks,t=>(d(),c("div",{key:t.id,class:"py-4"},[l("div",T,[l("div",I,[l("div",R,[l("h3",q,u(t.name),1),i($,{variant:t.is_active?"success":"default",size:"sm"},{default:a(()=>[n(u(t.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),l("p",G,u(t.url),1),l("div",H,[(d(!0),c(g,null,k(t.events,r=>(d(),b($,{key:r,variant:"info",size:"sm"},{default:a(()=>[n(u(r),1)]),_:2},1024))),128))]),l("p",J,u(t.success_count||0)+" successful â€¢ "+u(t.failed_count||0)+" failed ",1)]),l("div",P,[i(p,{size:"xs",onClick:r=>h(t)},{default:a(()=>e[6]||(e[6]=[n(" Test ")])),_:2,__:[6]},1032,["onClick"]),i(p,{size:"xs",onClick:r=>w(t)},{default:a(()=>[n(u(t.is_active?"Disable":"Enable"),1)]),_:2},1032,["onClick"]),i(p,{size:"xs",onClick:r=>z(t)},{default:a(()=>e[7]||(e[7]=[n(" Edit ")])),_:2,__:[7]},1032,["onClick"]),i(F,{size:"xs",onClick:r=>N(t)},{default:a(()=>e[8]||(e[8]=[n(" Delete ")])),_:2,__:[8]},1032,["onClick"])])])]))),128))])):(d(),b(L,{key:1},{default:a(()=>e[9]||(e[9]=[n(" No webhooks configured. Create one to get started. ")])),_:1,__:[9]}))]),_:1})]),i(U,{show:m.value,onClose:e[3]||(e[3]=t=>m.value=!1)},{title:a(()=>[n(u(f.value?"Edit Webhook":"Create Webhook"),1)]),content:a(()=>[l("div",Q,[l("div",null,[e[10]||(e[10]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Name",-1)),i(W,{modelValue:s.name,"onUpdate:modelValue":e[0]||(e[0]=t=>s.name=t),placeholder:"My Webhook",class:"w-full"},null,8,["modelValue"])]),l("div",null,[e[11]||(e[11]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"URL",-1)),i(W,{modelValue:s.url,"onUpdate:modelValue":e[1]||(e[1]=t=>s.url=t),placeholder:"https://example.com/webhook",class:"w-full"},null,8,["modelValue"])]),l("div",null,[e[12]||(e[12]=l("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Events",-1)),l("div",X,[(d(!0),c(g,null,k(_.available_events,(t,r)=>(d(),c("div",{key:r,class:"flex items-center gap-2"},[i(j,{checked:s.events.includes(r),onChange:Z=>S(r)},null,8,["checked","onChange"]),l("span",Y,u(t),1)]))),128))])])])]),footer:a(()=>[i(p,{onClick:e[2]||(e[2]=t=>m.value=!1)},{default:a(()=>e[13]||(e[13]=[n("Cancel")])),_:1,__:[13]}),i(C,{onClick:E,class:"ml-2"},{default:a(()=>e[14]||(e[14]=[n("Save")])),_:1,__:[14]})]),_:1},8,["show"])]))}};export{ue as default};
