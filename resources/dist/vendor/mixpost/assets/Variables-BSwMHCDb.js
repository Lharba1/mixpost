import{_ as Z,c as y,o as i,b as n,r as $,T as A,a as l,u as o,Z as G,w as a,F as N,e as B,g as S,d as t,t as _,O as I,P as J,k as T,N as Q}from"./app-J8XiJ-mz.js";import{_ as R}from"./PageHeader-Bl0L1E3g.js";import{_ as U}from"./Panel-CIAQcsXy.js";import{_ as M}from"./PrimaryButton-BYzrqdlc.js";import{_ as k}from"./Input-9U2-YNvE.js";import{_ as E}from"./Textarea-Bn7nFvuP.js";import{_ as p}from"./Label-gSIg1wU-.js";import{_ as v}from"./Error-CrH3L3I2.js";import{a as P}from"./DialogModal-dqUEVZRh.js";import{_ as W}from"./Flex-DYHxvlzw.js";import{_ as F}from"./Badge-KQBVNJRQ.js";import{T as q,a as V,_ as d}from"./TableCell-COh2j6sh.js";import{T as X}from"./Trash-8RnRVeSY.js";import"./PureButton-CTTp8NWo.js";const Y={},c={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function h(g,f){return i(),y("svg",c,f[0]||(f[0]=[n("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 7.5l3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0021 18V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v12a2.25 2.25 0 002.25 2.25z"},null,-1)]))}const ee=Z(Y,[["render",h]]),le={class:"row-py mb-2xl w-full mx-auto"},ae={class:"row-px"},te=["onClick"],se=["onClick"],oe={key:1,class:"text-center py-8 text-gray-500"},re={class:"space-y-4"},ne={class:"space-y-4"},xe={__name:"Variables",props:{custom_variables:{type:Array,required:!0},system_variables:{type:Array,required:!0}},setup(g){const f=$(!1),b=$(!1),w=$(null),r=A({name:"",key:"",value:""}),u=A({name:"",key:"",value:""}),z=()=>{r.reset(),f.value=!0},x=()=>{f.value=!1,r.reset()},K=m=>{w.value=m,u.name=m.name,u.key=m.key,u.value=m.value,b.value=!0},C=()=>{b.value=!1,w.value=null,u.reset()},L=()=>{r.post(route("mixpost.variables.store"),{preserveScroll:!0,onSuccess:()=>{x()}})},j=()=>{u.put(route("mixpost.variables.update",{variable:w.value.id}),{preserveScroll:!0,onSuccess:()=>{C()}})},D=m=>{confirm("Are you sure you want to delete this variable?")&&Q.delete(route("mixpost.variables.delete",{variable:m.id}),{preserveScroll:!0})},H=()=>{r.name&&!r.key&&(r.key=r.name.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/^_+|_+$/g,""))};return(m,e)=>(i(),y(N,null,[l(o(G),{title:"Variables"}),n("div",le,[l(R,{title:"Variables"}),n("div",ae,[l(U,null,{title:a(()=>e[6]||(e[6]=[t("System Variables")])),description:a(()=>e[7]||(e[7]=[t(" Built-in variables that are automatically replaced with current values at publish time. ")])),default:a(()=>[l(q,null,{head:a(()=>[l(V,null,{default:a(()=>[l(d,{heading:""},{default:a(()=>e[8]||(e[8]=[t("Name")])),_:1,__:[8]}),l(d,{heading:""},{default:a(()=>e[9]||(e[9]=[t("Placeholder")])),_:1,__:[9]}),l(d,{heading:""},{default:a(()=>e[10]||(e[10]=[t("Current Value")])),_:1,__:[10]})]),_:1})]),body:a(()=>[(i(!0),y(N,null,B(g.system_variables,s=>(i(),S(V,{key:s.key},{default:a(()=>[l(d,null,{default:a(()=>[t(_(s.name),1)]),_:2},1024),l(d,null,{default:a(()=>[l(F,{variant:"info"},{default:a(()=>[t(_("{"+s.key+"}"),1)]),_:2},1024)]),_:2},1024),l(d,null,{default:a(()=>[t(_(s.value),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),l(U,{class:"mt-lg"},{title:a(()=>e[11]||(e[11]=[t("Custom Variables")])),description:a(()=>e[12]||(e[12]=[t(" Create your own variables for repeated content like signatures, links, or promotions. ")])),action:a(()=>[l(M,{onClick:z,size:"sm"},{default:a(()=>[l(J,{class:"w-4 h-4 mr-1"}),e[13]||(e[13]=t(" Add Variable "))]),_:1,__:[13]})]),default:a(()=>[g.custom_variables.length>0?(i(),S(q,{key:0},{head:a(()=>[l(V,null,{default:a(()=>[l(d,{heading:""},{default:a(()=>e[14]||(e[14]=[t("Name")])),_:1,__:[14]}),l(d,{heading:""},{default:a(()=>e[15]||(e[15]=[t("Placeholder")])),_:1,__:[15]}),l(d,{heading:""},{default:a(()=>e[16]||(e[16]=[t("Value")])),_:1,__:[16]}),l(d,{heading:"",class:"w-24"},{default:a(()=>e[17]||(e[17]=[t("Actions")])),_:1,__:[17]})]),_:1})]),body:a(()=>[(i(!0),y(N,null,B(g.custom_variables,s=>(i(),S(V,{key:s.id},{default:a(()=>[l(d,null,{default:a(()=>[t(_(s.name),1)]),_:2},1024),l(d,null,{default:a(()=>[l(F,{variant:"info"},{default:a(()=>[t(_(s.placeholder),1)]),_:2},1024)]),_:2},1024),l(d,{class:"max-w-xs truncate"},{default:a(()=>[t(_(s.value),1)]),_:2},1024),l(d,null,{default:a(()=>[l(W,{class:"gap-2"},{default:a(()=>[n("button",{onClick:O=>K(s),class:"text-gray-500 hover:text-primary-500"},[l(I,{class:"w-5 h-5"})],8,te),n("button",{onClick:O=>D(s),class:"text-gray-500 hover:text-red-500"},[l(X,{class:"w-5 h-5"})],8,se)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(i(),y("div",oe,[l(ee,{class:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e[18]||(e[18]=n("p",null,"No custom variables yet.",-1)),e[19]||(e[19]=n("p",{class:"text-sm"},"Create your first variable to use in posts.",-1))]))]),_:1})])]),l(P,{show:f.value,onClose:x},{header:a(()=>e[20]||(e[20]=[t(" Create Variable ")])),body:a(()=>[n("div",re,[n("div",null,[l(p,{for:"name"},{default:a(()=>e[21]||(e[21]=[t("Name")])),_:1,__:[21]}),l(k,{id:"name",modelValue:o(r).name,"onUpdate:modelValue":e[0]||(e[0]=s=>o(r).name=s),onBlur:H,placeholder:"e.g., My Signature"},null,8,["modelValue"]),l(v,{message:o(r).errors.name},null,8,["message"])]),n("div",null,[l(p,{for:"key"},{default:a(()=>e[22]||(e[22]=[t(" Key "),n("span",{class:"text-gray-400 text-sm ml-1"},"(used as {'{key}'})",-1)])),_:1,__:[22]}),l(k,{id:"key",modelValue:o(r).key,"onUpdate:modelValue":e[1]||(e[1]=s=>o(r).key=s),placeholder:"e.g., my_signature"},null,8,["modelValue"]),l(v,{message:o(r).errors.key},null,8,["message"])]),n("div",null,[l(p,{for:"value"},{default:a(()=>e[23]||(e[23]=[t("Value")])),_:1,__:[23]}),l(E,{id:"value",modelValue:o(r).value,"onUpdate:modelValue":e[2]||(e[2]=s=>o(r).value=s),rows:"3",placeholder:"The text that will replace the variable"},null,8,["modelValue"]),l(v,{message:o(r).errors.value},null,8,["message"])])])]),footer:a(()=>[l(T,{onClick:x},{default:a(()=>e[24]||(e[24]=[t("Cancel")])),_:1,__:[24]}),l(M,{onClick:L,disabled:o(r).processing,class:"ml-2"},{default:a(()=>e[25]||(e[25]=[t(" Create Variable ")])),_:1,__:[25]},8,["disabled"])]),_:1},8,["show"]),l(P,{show:b.value,onClose:C},{header:a(()=>e[26]||(e[26]=[t(" Edit Variable ")])),body:a(()=>[n("div",ne,[n("div",null,[l(p,{for:"edit-name"},{default:a(()=>e[27]||(e[27]=[t("Name")])),_:1,__:[27]}),l(k,{id:"edit-name",modelValue:o(u).name,"onUpdate:modelValue":e[3]||(e[3]=s=>o(u).name=s)},null,8,["modelValue"]),l(v,{message:o(u).errors.name},null,8,["message"])]),n("div",null,[l(p,{for:"edit-key"},{default:a(()=>e[28]||(e[28]=[t("Key")])),_:1,__:[28]}),l(k,{id:"edit-key",modelValue:o(u).key,"onUpdate:modelValue":e[4]||(e[4]=s=>o(u).key=s)},null,8,["modelValue"]),l(v,{message:o(u).errors.key},null,8,["message"])]),n("div",null,[l(p,{for:"edit-value"},{default:a(()=>e[29]||(e[29]=[t("Value")])),_:1,__:[29]}),l(E,{id:"edit-value",modelValue:o(u).value,"onUpdate:modelValue":e[5]||(e[5]=s=>o(u).value=s),rows:"3"},null,8,["modelValue"]),l(v,{message:o(u).errors.value},null,8,["message"])])])]),footer:a(()=>[l(T,{onClick:C},{default:a(()=>e[30]||(e[30]=[t("Cancel")])),_:1,__:[30]}),l(M,{onClick:j,disabled:o(u).processing,class:"ml-2"},{default:a(()=>e[31]||(e[31]=[t(" Save Changes ")])),_:1,__:[31]},8,["disabled"])]),_:1},8,["show"])],64))}};export{xe as default};
