import{r as C,s as W,c as f,o as a,a as r,b as s,w as o,d as l,g as v,F as I,e as S,n as B,f as p,q as A,t as k,k as _,N as y}from"./app-D_YUq08z.js";import{_ as J}from"./PageHeader-Bec21Hkx.js";import{_ as K}from"./Panel-Dp7ivrCZ.js";import{_ as w}from"./PrimaryButton-CF_lBsTx.js";import{_ as D}from"./DangerButton-C0nfa6HB.js";import{_ as F}from"./Badge-BcKTkwVB.js";import{a as M}from"./DialogModal-CNuPME3C.js";import{_ as U}from"./Input-CNXdaV0x.js";import{_ as P}from"./Textarea-CTYd2hvr.js";import{_ as Q}from"./Select-CcjYXh0Y.js";import{_ as X}from"./NoResult-Bt8vmLQl.js";import"./PureButton-CU169vwq.js";const Y={class:"row-py"},Z={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},h={class:"flex items-start justify-between mt-2"},ee={class:"font-medium text-gray-900 dark:text-gray-100"},te={key:0,class:"text-sm text-gray-500 mt-2"},se={class:"flex items-center gap-4 mt-3 text-xs text-gray-500"},oe={class:"flex items-center gap-2 mt-4 pt-3 border-t border-gray-200 dark:border-gray-700"},le={class:"space-y-4"},re={class:"flex gap-2"},ae=["onClick"],ne={class:"space-y-4"},be={__name:"Workspaces",props:{workspaces:Array,current_workspace_id:Number},setup(d){const c=C(!1),g=C(!1),b=C(null),n=W({name:"",description:"",color:"#6366f1"}),m=W({email:"",role:"member"}),E=()=>{n.name="",n.description="",n.color="#6366f1"},L=["#6366f1","#8b5cf6","#ec4899","#ef4444","#f97316","#eab308","#22c55e","#14b8a6","#06b6d4","#3b82f6"],R=()=>{y.post(route("mixpost.workspaces.store"),n,{onSuccess:()=>{c.value=!1,E()}})},T=i=>{y.post(route("mixpost.workspaces.switch",i.id))},j=i=>{b.value=i,m.email="",m.role="member",g.value=!0},q=()=>{y.post(route("mixpost.workspaces.invite",b.value.id),m,{onSuccess:()=>{g.value=!1}})},O=i=>{confirm("Are you sure you want to leave this workspace?")&&y.post(route("mixpost.workspaces.leave",i.id))},G=i=>{confirm("Delete this workspace? All data will be lost.")&&y.delete(route("mixpost.workspaces.destroy",i.id))},H=i=>({owner:"primary",admin:"info",member:"default",viewer:"default"})[i]||"default";return(i,e)=>(a(),f("div",null,[r(J,{title:"Workspaces"},{description:o(()=>e[9]||(e[9]=[l(" Organize your work across multiple workspaces ")])),_:1}),s("div",Y,[r(K,null,{action:o(()=>[r(w,{size:"sm",onClick:e[0]||(e[0]=t=>c.value=!0)},{default:o(()=>e[10]||(e[10]=[l(" Create Workspace ")])),_:1,__:[10]})]),default:o(()=>[d.workspaces&&d.workspaces.length>0?(a(),f("div",Z,[(a(!0),f(I,null,S(d.workspaces,t=>{var x,$,V,z,N;return a(),f("div",{key:t.id,class:B(["border border-gray-200 dark:border-gray-700 rounded-lg p-4 relative",{"ring-2 ring-indigo-500":t.id===d.current_workspace_id}])},[s("div",{class:"absolute top-0 left-0 right-0 h-1 rounded-t-lg",style:A({backgroundColor:t.color})},null,4),s("div",h,[s("div",null,[s("h3",ee,k(t.name),1),t.id===d.current_workspace_id?(a(),v(F,{key:0,variant:"success",size:"sm",class:"mt-1"},{default:o(()=>e[11]||(e[11]=[l(" Current ")])),_:1,__:[11]})):p("",!0)]),r(F,{variant:H((x=t.pivot)==null?void 0:x.role),size:"sm"},{default:o(()=>{var u;return[l(k(((u=t.pivot)==null?void 0:u.role)||"member"),1)]}),_:2},1032,["variant"])]),t.description?(a(),f("p",te,k(t.description),1)):p("",!0),s("div",se,[s("span",null,k(t.members_count||0)+" members",1),s("span",null,k(t.accounts_count||0)+" accounts",1)]),s("div",oe,[t.id!==d.current_workspace_id?(a(),v(_,{key:0,size:"xs",onClick:u=>T(t)},{default:o(()=>e[12]||(e[12]=[l(" Switch ")])),_:2,__:[12]},1032,["onClick"])):p("",!0),(($=t.pivot)==null?void 0:$.role)==="owner"||((V=t.pivot)==null?void 0:V.role)==="admin"?(a(),v(_,{key:1,size:"xs",onClick:u=>j(t)},{default:o(()=>e[13]||(e[13]=[l(" Invite ")])),_:2,__:[13]},1032,["onClick"])):p("",!0),((z=t.pivot)==null?void 0:z.role)!=="owner"?(a(),v(D,{key:2,size:"xs",onClick:u=>O(t)},{default:o(()=>e[14]||(e[14]=[l(" Leave ")])),_:2,__:[14]},1032,["onClick"])):p("",!0),((N=t.pivot)==null?void 0:N.role)==="owner"?(a(),v(D,{key:3,size:"xs",onClick:u=>G(t)},{default:o(()=>e[15]||(e[15]=[l(" Delete ")])),_:2,__:[15]},1032,["onClick"])):p("",!0)])],2)}),128))])):(a(),v(X,{key:1},{default:o(()=>e[16]||(e[16]=[l(" No workspaces. Create one to get started. ")])),_:1,__:[16]}))]),_:1})]),r(M,{show:c.value,onClose:e[4]||(e[4]=t=>c.value=!1)},{title:o(()=>e[17]||(e[17]=[l("Create Workspace")])),content:o(()=>[s("div",le,[s("div",null,[e[18]||(e[18]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Name",-1)),r(U,{modelValue:n.name,"onUpdate:modelValue":e[1]||(e[1]=t=>n.name=t),placeholder:"Marketing Team",class:"w-full"},null,8,["modelValue"])]),s("div",null,[e[19]||(e[19]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Description",-1)),r(P,{modelValue:n.description,"onUpdate:modelValue":e[2]||(e[2]=t=>n.description=t),rows:"2",class:"w-full"},null,8,["modelValue"])]),s("div",null,[e[20]||(e[20]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"},"Color",-1)),s("div",re,[(a(),f(I,null,S(L,t=>s("button",{key:t,class:B(["w-8 h-8 rounded-full transition-transform",{"ring-2 ring-offset-2 ring-gray-400 scale-110":n.color===t}]),style:A({backgroundColor:t}),onClick:x=>n.color=t},null,14,ae)),64))])])])]),footer:o(()=>[r(_,{onClick:e[3]||(e[3]=t=>c.value=!1)},{default:o(()=>e[21]||(e[21]=[l("Cancel")])),_:1,__:[21]}),r(w,{onClick:R,class:"ml-2"},{default:o(()=>e[22]||(e[22]=[l("Create")])),_:1,__:[22]})]),_:1},8,["show"]),r(M,{show:g.value,onClose:e[8]||(e[8]=t=>g.value=!1)},{title:o(()=>{var t;return[l("Invite to "+k((t=b.value)==null?void 0:t.name),1)]}),content:o(()=>[s("div",ne,[s("div",null,[e[23]||(e[23]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Email",-1)),r(U,{modelValue:m.email,"onUpdate:modelValue":e[5]||(e[5]=t=>m.email=t),type:"email",placeholder:"user@example.com",class:"w-full"},null,8,["modelValue"])]),s("div",null,[e[25]||(e[25]=s("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Role",-1)),r(Q,{modelValue:m.role,"onUpdate:modelValue":e[6]||(e[6]=t=>m.role=t),class:"w-full"},{default:o(()=>e[24]||(e[24]=[s("option",{value:"admin"},"Admin",-1),s("option",{value:"member"},"Member",-1),s("option",{value:"viewer"},"Viewer",-1)])),_:1,__:[24]},8,["modelValue"])])])]),footer:o(()=>[r(_,{onClick:e[7]||(e[7]=t=>g.value=!1)},{default:o(()=>e[26]||(e[26]=[l("Cancel")])),_:1,__:[26]}),r(w,{onClick:q,class:"ml-2"},{default:o(()=>e[27]||(e[27]=[l("Send Invite")])),_:1,__:[27]})]),_:1},8,["show"])]))}};export{be as default};
