import{g,o as i,w as o,b as s,a as t,u as w,i as $,_ as D,c as d,r as v,f as p,d as f,n as N,N as k,h as T,j as V,Z as I,P as B,F as y,e as L,k as P,l as z,m as C,p as E,t as A}from"./app-CXX3zrIW.js";import{u as F}from"./useNotifications-C29Jku1p.js";import{_ as R}from"./PageHeader-BHsWpV-B.js";import{_ as H}from"./Panel-CaOwOlRX.js";import{_ as U}from"./DialogModal-DzKizjVt.js";import{_ as O}from"./ConfirmationModal-BzBSWSWv.js";import{_ as X}from"./Account-BtH47cGm.js";import{T as Y,F as q,M as Z}from"./ProviderIcon-B9EG8-Qs.js";import{_ as G}from"./Input-gB5vDofQ.js";import{_ as S}from"./PrimaryButton-eJ_4RmJf.js";import{_ as J}from"./HorizontalGroup-CA6dzxEr.js";import{_ as K}from"./DangerButton-CXfIUY38.js";import{E as Q}from"./EllipsisVertical-DIrbQsx-.js";import{T as W}from"./Trash-mRNCJ-yE.js";import{_ as ee}from"./PureButton-Bki68X8q.js";import{_ as se}from"./Alert-BmR-Z7Th.js";import"./ExclamationCircle-UJKr9iJH.js";const te={class:"flex mr-4"},oe={__name:"AddTwitterAccount",setup(m){return(n,r)=>(i(),g(w($),{href:n.route("mixpost.accounts.add",{provider:"twitter"}),method:"post",as:"button",type:"button",class:"w-full flex items-center px-lg py-4hover:bg-twitter/20 ease-in-out duration-200"},{default:o(()=>[s("span",te,[t(Y,{class:"text-twitter"})]),r[0]||(r[0]=s("span",{class:"flex flex-col items-start"},[s("span",{class:"font-medium"},"X"),s("span",null,"Connect a new X profile")],-1))]),_:1,__:[0]},8,["href"]))}},ne={class:"flex mr-4"},re={__name:"AddFacebookPage",setup(m){return(n,r)=>(i(),g(w($),{href:n.route("mixpost.accounts.add",{provider:"facebook_page"}),method:"post",as:"button",type:"button",class:"w-full flex items-center px-lg py-4 hover:bg-facebook/20 ease-in-out duration-200"},{default:o(()=>[s("span",ne,[t(q,{class:"text-facebook"})]),r[0]||(r[0]=s("span",{class:"flex flex-col items-start"},[s("span",{class:"font-medium"},"Facebook Page"),s("span",null,"Connect a new Facebook page")],-1))]),_:1,__:[0]},8,["href"]))}},ae={},le={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"};function ie(m,n){return i(),d("svg",le,n[0]||(n[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"},null,-1)]))}const ue=D(ae,[["render",ie]]),ce={class:"flex mr-md"},de={key:0,class:"px-lg py-md"},me={__name:"AddMastodonAccount",setup(m){const{notify:n}=F(),r=v(!1),a=v(""),l=v(!1),b=()=>new Promise((u,e)=>{axios.post(route("mixpost.services.createMastodonApp"),{server:a.value}).then(()=>{u()}).catch(function(_){e(_)})}),h=()=>{r.value=!0,k.post(route("mixpost.accounts.add",{provider:"mastodon"}),{server:a.value},{onSuccess(){r.value=!1}})},x=async()=>{r.value=!0,await b().then(()=>{h()}).catch(u=>{if(u.response.status!==422){n("error",u.response.data.message);return}n("error",u.response.data.errors)}).finally(()=>{r.value=!1})};return(u,e)=>(i(),d("div",{class:N({"bg-mastodon/20":l.value})},[s("div",{role:"button",onClick:e[0]||(e[0]=_=>l.value=!l.value),type:"button",class:"w-full flex items-center px-lg py-md hover:bg-mastodon/20 ease-in-out duration-200"},[s("span",ce,[t(Z,{class:"text-mastodon"})]),e[2]||(e[2]=s("span",{class:"flex flex-col items-start"},[s("span",{class:"font-medium"},"Mastodon"),s("span",null,"Connect a new Mastodon profile")],-1))]),l.value?(i(),d("div",de,[t(J,null,{title:o(()=>e[3]||(e[3]=[f("Enter your Mastodon server")])),default:o(()=>[t(G,{type:"text",modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=_=>a.value=_),placeholder:"example.server"},null,8,["modelValue"])]),_:1}),t(S,{onClick:x,disabled:!a.value||r.value,isLoading:r.value,class:"mt-xs md:mt-0"},{default:o(()=>[e[4]||(e[4]=s("span",{class:"mr-xs"},"Next",-1)),s("span",null,[t(ue,{class:"w-5! h-5!"})])]),_:1,__:[4]},8,["disabled","isLoading"])])):p("",!0)],2))}},fe={},pe={xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"};function _e(m,n){return i(),d("svg",pe,n[0]||(n[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]))}const ve=D(fe,[["render",_e]]),ge={key:0,class:"mb-md"},xe={key:0},we={key:1},be={__name:"AlertUnconfiguredService",props:{isConfigured:{type:Object,required:!0}},setup(m){const n=m,r=T(()=>Object.keys(n.isConfigured).some(a=>!["tenor","unsplash"].includes(a)&&n.isConfigured[a]!==!0));return(a,l)=>r.value?(i(),d("div",ge,[t(se,{variant:"warning",closeable:!1,class:"mb-md"},{default:o(()=>[m.isConfigured.facebook?p("",!0):(i(),d("p",xe,"You have not configured Facebook service.")),m.isConfigured.twitter?p("",!0):(i(),d("p",we,"You have not configured Twitter service.")),l[0]||(l[0]=s("p",{class:"mt-xs italic"},"Click on the button below to configure the third-party services.",-1))]),_:1,__:[0]}),t(w($),{href:a.route("mixpost.services.index"),class:"inline-block"},{default:o(()=>[t(S,null,{default:o(()=>l[1]||(l[1]=[f("Configure services")])),_:1,__:[1]})]),_:1},8,["href"])])):p("",!0)}},he={class:"w-full mx-auto row-py"},ke={class:"mt-lg row-px w-full"},$e={class:"w-full grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 2xl:grid-cols-5 gap-6"},ye={class:"block p-lg"},Ce={class:"flex flex-col justify-center items-center"},Ae={class:"absolute top-0 right-0 mt-sm mr-sm"},Me={class:"flex flex-col justify-center"},De={key:0,class:"absolute top-0 left-0"},Fe={class:"w-md h-md bg-red-500 rounded-full"},Se={class:"mt-sm font-medium text-center break-words"},je={class:"mt-1 text-center text-stone-800"},Ne={class:"flex flex-col"},M="Social Accounts",Je={__name:"Accounts",setup(m){const{notify:n}=F(),r=v(!1),a=v(null),l=v(!1),b=u=>{k.put(route("mixpost.accounts.update",{account:u}),{},{preserveScroll:!0,onSuccess(e){e.props.flash.error||n("success","The account has been refreshed")}})},h=()=>{k.delete(route("mixpost.accounts.delete",{account:a.value}),{preserveScroll:!0,onStart(){l.value=!0},onSuccess(){a.value=null,n("success","Account deleted")},onFinish(){l.value=!1}})},x=()=>{l.value||(a.value=null)};return(u,e)=>{const _=V("tooltip");return i(),d(y,null,[t(w(I),{title:M}),s("div",he,[t(R,{title:M},{description:o(()=>e[2]||(e[2]=[f(" Connect a social account you'd like to manage. ")])),_:1}),s("div",ke,[t(be,{isConfigured:u.$page.props.is_configured_service},null,8,["isConfigured"]),s("div",$e,[s("button",{onClick:e[0]||(e[0]=c=>r.value=!0),class:"border border-indigo-800 rounded-lg hover:border-indigo-500 hover:text-indigo-500 transition-colors ease-in-out duration-200"},[s("span",ye,[s("span",Ce,[t(B,{class:"w-7 h-7"}),e[3]||(e[3]=s("span",{class:"mt-xs text-lg"},"Add account",-1))])])]),(i(!0),d(y,null,L(u.$page.props.accounts,c=>(i(),g(H,{key:c.id,class:"relative"},{default:o(()=>[s("div",Ae,[t(z,{"width-classes":"w-32"},{trigger:o(()=>[t(ee,null,{default:o(()=>[t(Q)]),_:1})]),content:o(()=>[t(C,{onClick:j=>b(c.uuid),as:"button"},{default:o(()=>[t(ve,{class:"w-5! h-5! mr-1"}),e[4]||(e[4]=f(" Refresh "))]),_:2,__:[4]},1032,["onClick"]),t(C,{onClick:j=>a.value=c.uuid,as:"button"},{default:o(()=>[t(W,{class:"w-5! h-5! mr-1 text-red-500"}),e[5]||(e[5]=f(" Delete "))]),_:2,__:[5]},1032,["onClick"])]),_:2},1024)]),s("div",Me,[t(X,{size:"lg","img-url":c.image,provider:c.provider,active:!0},null,8,["img-url","provider"]),c.authorized?p("",!0):(i(),d("div",De,[E(s("div",Fe,null,512),[[_,"Unauthorized"]])])),s("div",Se,A(c.name),1),s("div",je,"Added: "+A(c.created_at),1)])]),_:2},1024))),128))])])]),t(O,{show:a.value!==null,onClose:x,variant:"danger"},{header:o(()=>e[6]||(e[6]=[f(" Delete account ")])),body:o(()=>e[7]||(e[7]=[f(" Are you sure you want to delete this account? ")])),footer:o(()=>[t(P,{onClick:x,disabled:l.value,class:"mr-xs"},{default:o(()=>e[8]||(e[8]=[f("Cancel ")])),_:1,__:[8]},8,["disabled"]),t(K,{onClick:h,"is-loading":l.value,disabled:l.value},{default:o(()=>e[9]||(e[9]=[f("Delete ")])),_:1,__:[9]},8,["is-loading","disabled"])]),_:1},8,["show"]),t(U,{show:r.value,closeable:!0,onClose:e[1]||(e[1]=c=>r.value=!1)},{default:o(()=>[s("div",Ne,[u.$page.props.is_service_active.facebook?(i(),g(re,{key:0})):p("",!0),t(me),u.$page.props.is_service_active.twitter?(i(),g(oe,{key:1})):p("",!0)])]),_:1},8,["show"])],64)}}};export{Je as default};
