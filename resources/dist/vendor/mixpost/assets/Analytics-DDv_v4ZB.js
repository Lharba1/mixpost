import{r as b,h as A,c as i,o as r,a as l,b as t,u as F,Z as N,w as a,d,F as c,e as y,t as o,k as D,q as w,N as T}from"./app-NUlG-GPf.js";import{_ as j}from"./PageHeader-DUhTkuU_.js";import{_ as u}from"./Panel-gVeqz2-S.js";import{_ as O}from"./PrimaryButton-D8LBWSS6.js";import{_ as B}from"./Select-B5I9vToT.js";import{_ as P}from"./Input-Cx9dsStV.js";import{_ as h}from"./Label-Dv64VmDx.js";import{_ as H}from"./Badge-CsRE_ee7.js";import{A as C}from"./ArrowPath-Bif0JerF.js";const I={class:"row-py mb-2xl w-full mx-auto"},U={class:"row-px"},q={class:"flex flex-wrap gap-4 items-end"},z=["value"],E={class:"grid grid-cols-4 gap-4 mt-lg"},L={class:"text-4xl font-bold text-primary-500"},R={class:"text-4xl font-bold text-blue-500"},W={class:"text-4xl font-bold text-red-500"},Z={class:"text-4xl font-bold text-green-500"},G={class:"h-48 flex items-end gap-1"},J={class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap"},K={class:"flex justify-between text-xs text-gray-400 mt-2"},Q={class:"grid grid-cols-2 gap-4 mt-lg"},X={class:"h-32 flex items-end gap-0.5"},Y={class:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 px-2 py-1 bg-gray-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap"},tt={class:"space-y-2"},et={class:"w-10 text-sm text-gray-500"},st={class:"flex-1 h-6 bg-gray-100 dark:bg-gray-700 rounded overflow-hidden"},lt={class:"w-8 text-sm text-gray-600 dark:text-gray-400 text-right"},at={key:0,class:"space-y-3"},ot={class:"flex-1"},nt={class:"font-medium text-gray-900 dark:text-gray-100"},it={class:"text-sm text-gray-500"},rt={key:1,class:"text-center py-8 text-gray-500"},dt={key:0,class:"space-y-3"},ut={class:"text-sm text-gray-700 dark:text-gray-300 mb-2"},ct={class:"flex items-center gap-4 text-xs text-gray-500"},yt={key:1,class:"text-center py-8 text-gray-500"},ht={__name:"Analytics",props:{analytics:{type:Object,required:!0},accounts:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(n){const m=n,x=b(m.filters.from),_=b(m.filters.to),p=b(m.filters.account_id||""),k=()=>{T.get(route("mixpost.analytics.index"),{from:x.value,to:_.value,account_id:p.value||void 0},{preserveState:!0,preserveScroll:!0})},V=()=>{x.value=new Date(Date.now()-30*24*60*60*1e3).toISOString().split("T")[0],_.value=new Date().toISOString().split("T")[0],p.value="",k()},$=A(()=>Math.max(...m.analytics.posts_per_day.map(f=>f.count),1)),S=A(()=>Math.max(...m.analytics.posts_by_hour.map(f=>f.count),1));return(f,e)=>(r(),i(c,null,[l(F(N),{title:"Analytics"}),t("div",I,[l(j,{title:"Analytics"}),t("div",U,[l(u,null,{default:a(()=>[t("div",q,[t("div",null,[l(h,null,{default:a(()=>e[3]||(e[3]=[d("From")])),_:1,__:[3]}),l(P,{type:"date",modelValue:x.value,"onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s),class:"w-40"},null,8,["modelValue"])]),t("div",null,[l(h,null,{default:a(()=>e[4]||(e[4]=[d("To")])),_:1,__:[4]}),l(P,{type:"date",modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=s=>_.value=s),class:"w-40"},null,8,["modelValue"])]),t("div",null,[l(h,null,{default:a(()=>e[5]||(e[5]=[d("Account")])),_:1,__:[5]}),l(B,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=s=>p.value=s),class:"w-48"},{default:a(()=>[e[6]||(e[6]=t("option",{value:""},"All Accounts",-1)),(r(!0),i(c,null,y(n.accounts,s=>(r(),i("option",{key:s.id,value:s.id},o(s.name),9,z))),128))]),_:1,__:[6]},8,["modelValue"])]),l(O,{onClick:k},{default:a(()=>e[7]||(e[7]=[d(" Apply ")])),_:1,__:[7]}),l(D,{onClick:V},{default:a(()=>[l(C,{class:"w-4 h-4"})]),_:1})])]),_:1}),t("div",E,[l(u,{class:"text-center"},{default:a(()=>[t("div",L,o(n.analytics.overview.total_posts),1),e[8]||(e[8]=t("div",{class:"text-sm text-gray-500 mt-1"},"Published Posts",-1))]),_:1,__:[8]}),l(u,{class:"text-center"},{default:a(()=>[t("div",R,o(n.analytics.overview.scheduled_posts),1),e[9]||(e[9]=t("div",{class:"text-sm text-gray-500 mt-1"},"Scheduled",-1))]),_:1,__:[9]}),l(u,{class:"text-center"},{default:a(()=>[t("div",W,o(n.analytics.overview.failed_posts),1),e[10]||(e[10]=t("div",{class:"text-sm text-gray-500 mt-1"},"Failed",-1))]),_:1,__:[10]}),l(u,{class:"text-center"},{default:a(()=>{var s;return[t("div",Z,o(((s=n.analytics.engagement)==null?void 0:s.followers)||0),1),e[11]||(e[11]=t("div",{class:"text-sm text-gray-500 mt-1"},"Total Followers",-1))]}),_:1,__:[11]})]),l(u,{class:"mt-lg"},{title:a(()=>e[12]||(e[12]=[d("Posts Over Time")])),default:a(()=>{var s,g;return[t("div",G,[(r(!0),i(c,null,y(n.analytics.posts_per_day,(v,M)=>(r(),i("div",{key:M,class:"flex-1 bg-primary-500 rounded-t transition-all hover:bg-primary-600 relative group",style:w({height:`${v.count/$.value*100}%`,minHeight:v.count>0?"4px":"0"})},[t("div",J,o(v.label)+": "+o(v.count)+" posts ",1)],4))),128))]),t("div",K,[t("span",null,o((s=n.analytics.posts_per_day[0])==null?void 0:s.label),1),t("span",null,o((g=n.analytics.posts_per_day[n.analytics.posts_per_day.length-1])==null?void 0:g.label),1)])]}),_:1}),t("div",Q,[l(u,null,{title:a(()=>e[13]||(e[13]=[d("Posts by Hour")])),default:a(()=>[t("div",X,[(r(!0),i(c,null,y(n.analytics.posts_by_hour,s=>(r(),i("div",{key:s.hour,class:"flex-1 bg-blue-500 rounded-t transition-all hover:bg-blue-600 relative group",style:w({height:`${s.count/S.value*100}%`,minHeight:s.count>0?"2px":"0"})},[t("div",Y,o(s.label)+": "+o(s.count),1)],4))),128))]),e[14]||(e[14]=t("div",{class:"flex justify-between text-xs text-gray-400 mt-2"},[t("span",null,"12 AM"),t("span",null,"6 AM"),t("span",null,"12 PM"),t("span",null,"6 PM"),t("span",null,"12 AM")],-1))]),_:1,__:[14]}),l(u,null,{title:a(()=>e[15]||(e[15]=[d("Posts by Day of Week")])),default:a(()=>[t("div",tt,[(r(!0),i(c,null,y(n.analytics.posts_by_day_of_week,s=>(r(),i("div",{key:s.day,class:"flex items-center gap-3"},[t("span",et,o(s.label),1),t("div",st,[t("div",{class:"h-full bg-green-500 rounded",style:w({width:`${s.count/Math.max(...n.analytics.posts_by_day_of_week.map(g=>g.count),1)*100}%`})},null,4)]),t("span",lt,o(s.count),1)]))),128))])]),_:1})]),l(u,{class:"mt-lg"},{title:a(()=>e[16]||(e[16]=[d("Posts by Account")])),default:a(()=>[n.analytics.posts_by_account.length>0?(r(),i("div",at,[(r(!0),i(c,null,y(n.analytics.posts_by_account,s=>(r(),i("div",{key:s.id,class:"flex items-center gap-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},[t("div",ot,[t("div",nt,o(s.name),1),t("div",it,o(s.provider),1)]),l(H,{variant:"info"},{default:a(()=>[d(o(s.posts_count)+" posts ",1)]),_:2},1024)]))),128))])):(r(),i("div",rt," No accounts found. "))]),_:1}),l(u,{class:"mt-lg mb-lg"},{title:a(()=>e[17]||(e[17]=[d("Recent Posts")])),default:a(()=>[n.analytics.top_posts.length>0?(r(),i("div",dt,[(r(!0),i(c,null,y(n.analytics.top_posts,s=>(r(),i("div",{key:s.id,class:"p-3 bg-gray-50 dark:bg-gray-800 rounded-lg"},[t("p",ut,o(s.preview)+"... ",1),t("div",ct,[t("span",null,o(s.scheduled_at),1),t("span",null,o(s.accounts.join(", ")),1)])]))),128))])):(r(),i("div",yt," No posts in this period. "))]),_:1})])])],64))}};export{ht as default};
